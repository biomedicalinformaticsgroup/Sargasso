#!/usr/bin/env bash

set -o nounset
set -o errexit

SAMPLES=( $1 )
RAW_READS_DIRECTORY=$2
RAW_READ_FILES=( $3 )
READS_DIR=$4

for ((i = 0; i < ${#SAMPLES[@]}; i++)); do
    sample_reads_dir=${READS_DIR}/${SAMPLES[i]}/reads
    mkdir -p ${sample_reads_dir}
    echo "${RAW_READ_FILES[i]}" | tr ',' '\n' | xargs -i ln -s ${RAW_READS_DIRECTORY}/{} ${sample_reads_dir}
done
