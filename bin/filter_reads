#!/usr/bin/env bash

set -o nounset
set -o errexit

SPECIES_ONE=$1
SPECIES_TWO=$2
SAMPLES=$3
INPUT_DIR=$4
OUTPUT_DIR=$5

for sample in ${SAMPLES}; do
    sorted_reads_prefix=${INPUT_DIR}/${sample}
    filtered_reads_prefix=${OUTPUT_DIR}/${sample}

    filter_sample_reads ${SPECIES_ONE} ${sorted_reads_prefix}.${SPECIES_ONE}.bam ${filtered_reads_prefix}.${SPECIES_ONE}.bam ${SPECIES_TWO} ${sorted_reads_prefix}.${SPECIES_TWO}.bam ${filtered_reads_prefix}.${SPECIES_TWO}.bam
done
